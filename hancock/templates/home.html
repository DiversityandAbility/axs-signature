{% extends "base.html" %}

{% block body %}
    <script src="{{ url_for('static', filename='signature.js') }}"></script>

    <div class="py-4">
        <p class="p-2 text-lg md:text-base">AXS Signature is an open source service that makes it easy for you to request electronic signatures from your users.</p>
        <p class="p-2 text-lg md:text-base">It's designed to be easy to use (for you and your users); accessible, so everyone can use it; and secure, so you know you can trust and verify the signatures.</p>    
    </div>
    <div class="p-4 md:py-6 md:px-14 my-4 md:mx-8 border-2 md:border-8 border-bordercol bg-textbg rounded-lg">
        <h2 class="p-2 text-2xl md:text-lg font-bold">Try it!</h2>
        <p class="p-2 text-lg md:text-base">Fill in this form to create a "signature session", hopefully it's simple enough to just start using, but if you want to learn more, <a href="/docs/" class="font-semibold text-hyperlinkcolour hover:text-sky-600 hover:shadow-xl underline">read our documentation</a>.</p>
        <form id="request-form">
            <div class="block p-3 my-4 md:border-4 border-slate">
                <label for="signee_email" class="block font-bold uppercase text-xl md:text-base">Your Email:</label>
                <input type="email" id="signee_email" name="signee_email" class="focus:shadow-xl h-12 md:h-14 text-2xl md:text-base focus:border-blue-500 appearance-none rounded border py-2 px-3 leading-tight text-gray-700 shadow focus:outline-none w-full" required >
            </div>
            <div class="flex justify-center py-2">
                <input type="submit" value="Sign Here" class="text-white font-['Oswald'] px-6 py-4 bg-hyperlinkcolour border-4 rounded-xl hover:bg-sky-600 shadow-sm hover:shadow-xl font-bold uppercase text-xl md:text-base">
            </div>  
        </form>
        <div class="signature hidden">
            <h3>Your Signature:</h3>
            <img src="" alt="">
        </div>
    </div>
    <script>
        (() => {
            let form = document.getElementById("request-form");
            form.addEventListener("submit", async evt => {
                evt.preventDefault();
                let imageUrl = await window.AXSSignature(
                    window.location.origin,
                    "123",
                    {
                        redirect_uri: "{{ request.url }}",
                        title: "Demo Signature",
                        declaration: "I'm testing out AXS Signature and I'm loving how easy it is to use!",
                        signee_email: document.getElementById("signee_email").value,
                    }
                );
                document.querySelector(".signature img").setAttribute("src", imageUrl);
                document.querySelector(".signature").classList.toggle("hidden");
                document.querySelector("#request-form").classList.toggle("hidden");
                return false;
            });
        })();
    </script>
{% endblock %}